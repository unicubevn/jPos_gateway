description = 'jPOS-EE :: AtomGateway'

apply plugin: 'war'

configurations {
   all*.exclude group: "com.vaadin", module: "vaadin-client-compiler"
   all*.exclude group: "com.vaadin", module: "vaadin-client-compiled"
   all*.exclude group: "org.slf4j", module: "slf4j-nop"
}

dependencies {
    providedCompile project (':modules:qi-core')
    providedCompile project (':modules:qi-sysconfig')
    providedCompile project (':modules:qi-eeuser')
    providedCompile project (':modules:qi-minigl')

    providedCompile project(':modules:core')
    providedCompile project(':modules:logback')
    providedCompile project(':modules:dbsupport')
    providedCompile project(':modules:db-postgresql')
    providedCompile project(':modules:sysconfig')
    providedCompile project(':modules:eeuser')
    providedCompile project(':modules:syslog')
    providedCompile project(':modules:visitor')
    providedCompile project(':modules:jetty')
    providedCompile project(':modules:cryptoservice')
    providedCompile project(':modules:minigl')
    providedCompile project(':modules:seqno')

    providedCompile project(':modules:server-simulator')
    providedCompile project(':modules:txn')


    providedCompile 'org.postgresql:postgresql:42.5.0'
    providedCompile 'com.vaadin.external.slf4j:vaadin-slf4j-jdk14:1.6.1'
    providedCompile 'org.slf4j:jul-to-slf4j:1.7.7'
    providedCompile 'redis.clients:jedis:4.3.0-m2'

}

apply from: "${rootProject.projectDir}/jpos-app.gradle"

war {
    exclude 'VAADIN/gwt-unitCache*'
    exclude 'VAADIN/gwt-unitCache'
    exclude '**/*.ico'
    exclude '**/*.png'
    exclude '**/*.jpg'
    exclude '**/*.gif'
    exclude '**/*.pdf'
    filter(
        org.apache.tools.ant.filters.ReplaceTokens,
        tokens: targetConfiguration
    )
}

installApp.dependsOn('war')
dist.dependsOn('war')

